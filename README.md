# 🚀 월별 성과 평가 시스템 v2.0 - 설정 가이드

## 📋 시스템 개요

구글 시트와 구글 앱스크립트를 활용한 3단계 월별 성과 평가 시스템의 개선된 버전입니다.

### 주요 개선사항
- ✅ 로그인 시스템 추가
- ✅ 평가 진행상태 대시보드
- ✅ 평가자 추적 기능
- ✅ 더 안정적인 데이터 구조
- ✅ 향상된 UI/UX

## 🛠️ 초기 설정 가이드

### 1단계: 구글 스프레드시트 생성

1. 새 구글 스프레드시트 생성
2. 스프레드시트 ID 복사 (URL에서 `/d/`와 `/edit` 사이의 문자열)

### 2단계: 구글 앱스크립트 설정

1. 스프레드시트에서 `확장 프로그램` > `Apps Script` 클릭
2. 기존 코드 삭제
3. 제공된 `Code.gs` 전체 내용 붙여넣기
4. `SPREADSHEET_ID` 값을 본인의 스프레드시트 ID로 변경

```javascript
const SPREADSHEET_ID = '여기에_본인의_스프레드시트_ID_입력';
```

### 3단계: HTML 파일 추가

1. Apps Script 편집기에서 `+` 버튼 클릭 > `HTML` 선택
2. 파일명을 `index`로 설정
3. 제공된 `index.html` 전체 내용 붙여넣기

### 4단계: 시트 초기화

1. Apps Script 편집기에서 `initSheets` 함수 선택
2. `실행` 버튼 클릭
3. 권한 요청 시 승인

이 작업으로 다음 시트들이 자동 생성됩니다:
- 사용자
- 팀
- 채널
- 월별평가
- 평가진행상태

### 5단계: 웹앱 배포

1. Apps Script 편집기에서 `배포` > `새 배포` 클릭
2. 설정:
   - 유형: `웹앱`
   - 실행: `나`
   - 액세스: `조직 내 모든 사용자` (또는 필요에 따라 조정)
3. `배포` 버튼 클릭
4. 웹앱 URL 복사

## 📊 시트 구조 상세 설명

### 1. 사용자 시트
| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| 사용자ID | 고유 식별자 | USER001 (담당자), admin@company.com (관리자) |
| 이메일 | 로그인용 이메일 | admin@company.com |
| 이름 | 사용자 이름 | 김관리자 |
| 비밀번호 | 로그인 비밀번호 | admin123 |
| 역할 | 담당 역할 | 팀장/관리자/최종관리자/PD/편집자 등 |
| 소속팀ID | 소속 팀 (복수 가능) | T01 또는 T01,T02 |
| 1차평가권한 | 1차 평가 가능 여부 | Y/N |
| 2차평가권한 | 2차 평가 가능 여부 | Y/N |
| 3차평가권한 | 3차 평가 가능 여부 | Y/N |
| 활성상태 | 계정 활성화 상태 | Y/N |
| 생성일시 | 계정 생성 시간 | 2025/01/20 10:00:00 |

### 2. 팀 시트
| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| 팀ID | 팀 고유 식별자 | T01 |
| 팀이름 | 팀 명칭 | 콘텐츠1팀 |
| 팀장ID | 팀장 사용자ID | team1@company.com |
| 활성상태 | 팀 활성화 상태 | Y/N |

### 3. 채널 시트
| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| 채널ID | 채널 고유 식별자 | CH001 |
| 채널이름 | 채널 명칭 | 메인채널 |
| 소속팀ID | 소속 팀 | T01 |
| 활성상태 | 채널 활성화 상태 | Y/N |

### 4. 월별평가 시트
평가 데이터가 저장되는 핵심 시트입니다. 1차, 2차, 3차 평가 데이터가 모두 여기에 누적됩니다.

### 5. 평가진행상태 시트
각 채널별 평가 진행 상황을 추적합니다.

## 🔐 기본 계정 정보

초기 설정 시 생성되는 기본 관리자 계정:
- **이메일**: admin@company.com
- **비밀번호**: admin123
- **권한**: 모든 평가 권한 (1차, 2차, 3차)

## 💡 사용 가이드

### 1. 로그인
1. 웹앱 URL 접속
2. 이메일과 비밀번호 입력
3. 로그인 버튼 클릭

### 2. 역할별 기능

#### 팀장 (1차 평가자)
- 자신의 팀 채널만 표시
- 담당자별 투입MM, 기여도, 성과 입력
- 임시저장 및 최종제출 가능

#### 관리자 (2차 평가자)
- 모든 팀/채널 조회 가능
- 1차 평가 내용 확인 (읽기전용)
- 2차 기여도 조정 및 코멘트 입력

#### 최종관리자 (3차 평가자)
- 평가 진행상태 대시보드 확인
- 채널별 예산 설정
- 최종 성과금 확정
- 시스템 관리자 추가 기능

### 3. 담당자 추가
1. 채널 테이블 하단의 "+ 담당자" 버튼 클릭
2. 이름과 역할 입력
3. 추가 버튼 클릭

### 4. 시스템 관리자 추가 (최종관리자만 가능)
1. "+ 시스템 관리자 추가" 버튼 클릭
2. 정보 입력:
   - 이름
   - 이메일 (로그인 ID)
   - 비밀번호
   - 소속팀 (복수 선택 가능)
   - 역할 및 권한
3. 추가 버튼 클릭

## 🔄 평가 프로세스

### 1차 평가 (팀장)
1. 월 선택
2. 담당자별 정보 입력:
   - 투입 MM
   - 기여도 (%)
   - 핵심 성과
   - 코멘트
3. 임시저장 또는 최종제출

### 2차 평가 (관리자)
1. 1차 평가 확인
2. 필요시 담당자 추가
3. 2차 기여도 조정
4. 2차 코멘트 작성
5. 저장

### 3차 평가 (최종관리자)
1. 진행상태 대시보드 확인
2. 채널별 예산 설정:
   - 사업효율(%)
   - 1차 성과금
   - 팀장성과(%)
3. 실지급 성과금 입력
4. 최종 확정

## 🐛 문제 해결

### 팀이 표시되지 않는 경우
1. 사용자의 소속팀ID 확인
2. 팀 시트에서 해당 팀의 활성상태 확인
3. 팀ID가 정확히 일치하는지 확인

### 로그인이 안 되는 경우
1. 이메일과 비밀번호 확인
2. 사용자 시트에서 활성상태가 'Y'인지 확인
3. 이메일 컬럼이 비어있지 않은지 확인

### 데이터가 저장되지 않는 경우
1. 스프레드시트 권한 확인
2. Apps Script 로그 확인 (보기 > 실행 내역)
3. 브라우저 개발자 도구에서 오류 메시지 확인

## 📈 향후 개선 계획

- [ ] 이메일 알림 기능
- [ ] 평가 히스토리 조회
- [ ] 엑셀 내보내기
- [ ] 모바일 반응형 개선
- [ ] 실시간 협업 기능
- [ ] 대시보드 고도화

## 📞 지원

문제가 발생하거나 추가 기능이 필요한 경우, 다음 정보와 함께 문의해주세요:
- 오류 메시지 스크린샷
- 발생 상황 설명
- 사용자 역할 및 권한
- 브라우저 정보
